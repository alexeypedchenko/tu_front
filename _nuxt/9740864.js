(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{353:function(e,t,n){"use strict";n.r(t);n(27),n(33),n(37),n(60),n(22),n(61);var o=n(25),r=(n(66),n(47)),c=n(171),l=n(172),h=(n(87),n(319),n(13),n(205),n(416)),m=n(417),d=(n(103),n(38),n(56),function(){function e(t,n){Object(c.a)(this,e),this.loader=new h.a({apiKey:"AIzaSyBOMQAKjVaaYfe_fSHNn3CBFcbNS651GnA",version:"weekly"}),this.map=null,this.mapContainer=document.querySelector(t),this.mapOptions={zoom:6,center:{lat:49.30881846,lng:30.53801849},clickableIcons:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,scrollwheel:!0},this.markers=[],this.pin=n,this.route=null,this.circle=null,this.cluster=null,this.hoveredMarkerIndex=null}return Object(l.a)(e,[{key:"setMarkers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.clearMarkers(),t.forEach((function(t){var marker=e.createMarker(t);e.markers.push(marker),e.cluster.setPoint(t),e.createInfoWindow(marker,t),e.markerOnMouseover(marker,t),e.markerOnMouseout(marker,t)})),this.cluster.group(this.markers),this.centeredMap()}},{key:"createMarker",value:function(marker){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t={position:{lat:+marker.coordinates.lat,lng:+marker.coordinates.lng},zIndex:10,icon:{url:marker.icon||this.pin,size:new google.maps.Size(30,30),scaledSize:new google.maps.Size(30,30)}};e&&(t.map=this.map);var n=new google.maps.Marker(t);return n}},{key:"handleCreateMarker",value:function(data){var marker=this.createMarker(data,!0);this.markers.push(marker),this.circle.show(marker)}},{key:"removeMarker",value:function(e){this.markers[e].setMap(null)}},{key:"removeLastMarker",value:function(){this.markers[this.markers.length-1].setMap(null),this.circle.hide()}},{key:"centeredMap",value:function(){return this.markers.length>1?(this.map.fitBounds(this.cluster.bounds),void this.rebotMapZoom()):1===this.markers.length?(this.map.setCenter(this.markers[0].getPosition()),void this.map.setZoom(14)):(this.map.setCenter(this.mapOptions.center),void this.map.setZoom(this.mapOptions.zoom))}},{key:"rebotMapZoom",value:function(){var e=this,t=this.map.getZoom();this.map.setZoom(t-1),setTimeout((function(){e.map.setZoom(t)}),0)}},{key:"createInfoWindow",value:function(marker,e){var data,t=this,n='\n    <div class="map-window">\n      <div class="map-window-img">\n        <img src="'.concat((data=e).image,'" alt="').concat(data.name,'">\n      </div>\n      <div class="map-window-content">\n        <h2 class="map-window-title">\n          ').concat(data.name,'\n        </h2>\n        <p class="map-window-description">\n          <span>\n            ').concat(data.description,"\n          <span/>\n        </p>\n      </div>\n    </div>\n  "),o=new google.maps.InfoWindow({content:n});this.openInfoWindowOnMarkerClick(marker,o),this.map.addListener("click",(function(){o.close(t.map,marker)}))}},{key:"openInfoWindowOnMarkerClick",value:function(marker,e){var t=this;marker.addListener("click",(function(){e.getMap()?e.close(t.map,marker):(google.maps.event.trigger(t.map,"click"),e.open(t.map,marker))}))}},{key:"markerOnMouseover",value:function(marker,e){var t=this,n=this.markers.findIndex((function(e){return e===marker}));marker.addListener("mouseover",(function(){t.hoveredMarkerIndex=n,t.circle.show(marker)}))}},{key:"markerOnMouseout",value:function(marker){var e=this;marker.addListener("mouseout",(function(){e.circle.hide(),e.hoveredMarkerIndex=null}))}},{key:"clearMarkers",value:function(){var e=this;this.cluster.clear(),this.route.clear(),this.markers.forEach((function(marker,t){e.removeMarker(t)})),this.markers=[]}},{key:"handleClickMarker",value:function(e){google.maps.event.trigger(this.markers[e],"click")}},{key:"handleMarkerMouseover",value:function(e){google.maps.event.trigger(this.markers[e],"mouseover")}},{key:"handleMarkerMouseout",value:function(e){google.maps.event.trigger(this.markers[e],"mouseout")}},{key:"init",value:function(){var e=this;return new Promise((function(t,n){e.loader.load().then((function(){return e.map=new google.maps.Map(e.mapContainer,e.mapOptions),e.circle=new k(e.map),e.route=new v(e.map),e.cluster=new f(e.map),t()})).catch((function(e){return console.log("GoogleMap init error:",e),n()}))}))}}]),e}()),f=function(){function e(map){Object(c.a)(this,e),this.markerCluster=null,this.bounds=null,this.map=map}return Object(l.a)(e,[{key:"group",value:function(e){this.markerCluster=new m.a(this.map,e,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})}},{key:"setPoint",value:function(e){this.init(),this.bounds.extend({lat:+e.coordinates.lat,lng:+e.coordinates.lng})}},{key:"clear",value:function(){null!==this.markerCluster&&(this.bounds=null,this.markerCluster.clearMarkers())}},{key:"init",value:function(){null===this.bounds&&(this.bounds=new google.maps.LatLngBounds)}}]),e}(),v=function(){function e(map){Object(c.a)(this,e),this.directionsService=null,this.directionsRenderer=null,this.map=map,this.init()}return Object(l.a)(e,[{key:"draw",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length&&!(t.langth<2)){this.directionsRenderer.setMap(this.map);var n={origin:(t=t.map((function(t){return e.createWaypoint(t)})))[0].location,destination:t[t.length-1].location,optimizeWaypoints:!0,travelMode:google.maps.TravelMode.DRIVING};t.length>2&&(n.waypoints=t.splice(1,t.length-2)),this.directionsService.route(n,(function(t,n){"OK"===n&&t?e.directionsRenderer.setDirections(t):window.alert("Directions request failed due to "+n)}))}}},{key:"createWaypoint",value:function(marker){var e=marker.coordinates?+marker.coordinates.lat:marker.getPosition().lat(),t=marker.coordinates?+marker.coordinates.lng:marker.getPosition().lng();return{location:new google.maps.LatLng(e,t),stopover:!1}}},{key:"clear",value:function(){this.directionsRenderer.setMap(null)}},{key:"init",value:function(){this.directionsService=new google.maps.DirectionsService,this.directionsRenderer=new google.maps.DirectionsRenderer({suppressMarkers:!0,preserveViewport:!0})}}]),e}(),k=function(){function e(map){Object(c.a)(this,e),this.options={zIndex:2,visible:!1,position:{lat:46.64288927,lng:31.07230514},icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"green",fillOpacity:.15,strokeColor:"green",strokeOpacity:.8,strokeWeight:1,scale:20,anchor:new google.maps.Point(0,.8),zIndex:2},map:map},this.circle=new google.maps.Marker(this.options)}return Object(l.a)(e,[{key:"show",value:function(marker){var e=marker.getPosition();this.circle.setPosition(e),this.circle.setVisible(!0)}},{key:"hide",value:function(){this.circle.setVisible(!1)}}]),e}();function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var M={name:"GoogleMap",props:{items:{type:Array,default:function(){return[]}},route:{type:Array,default:function(){return[]}},showRoute:{type:Boolean,default:!1}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(r.c)("map",["activeInfoWindow","triggerInfoWindow","hoveredMarker"])),data:function(){return{map:null,pin:"/icons/pin.svg",prewInfoWinfow:null}},watch:{items:function(e,t){JSON.stringify(e)!==JSON.stringify(t)&&this.drawMapData()},route:function(e,t){JSON.stringify(e)!==JSON.stringify(t)&&this.drawRoute()},triggerInfoWindow:function(e,t){this.prewInfoWinfow===this.activeInfoWindow?(this.prewInfoWinfow=null,this.map.centeredMap()):this.prewInfoWinfow=this.activeInfoWindow,this.handleMarker(this.activeInfoWindow)},hoveredMarker:function(e,t){this.hoveredMarker?this.map.handleCreateMarker(this.hoveredMarker):this.map.removeLastMarker()},"map.hoveredMarkerIndex":function(e,t){this.$store.commit("map/setHoveredMarkerIndex",e)}},mounted:function(){var e=this;this.map=new d(".google-map__container",this.pin),this.map.init().then((function(){e.$store.commit("map/mapInit"),e.drawMapData(),e.drawRoute()}))},methods:{handleMarker:function(e){this.map&&this.map.handleClickMarker(e)},centeredMap:function(){this.map&&this.map.centeredMap()},drawMapData:function(){this.map.setMarkers(this.items),this.showRoute&&this.map.route.draw(this.items)},drawRoute:function(){this.route.length&&(this.map.route.clear(),this.map.route.draw(this.route))}},destroy:function(){this.$store.commit("map/mapDestroy")}},y=(n(418),n(8)),component=Object(y.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"google-map"},[n("div",{staticClass:"google-map__centred-btn",on:{click:e.centeredMap}},[e._v("\n    Центрировать карту\n  ")]),e._v(" "),n("div",{staticClass:"google-map__container"})])}),[],!1,null,null,null);t.default=component.exports},396:function(e,t,n){var content=n(419);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(43).default)("7746b681",content,!0,{sourceMap:!1})},418:function(e,t,n){"use strict";n(396)},419:function(e,t,n){var o=n(42)(!1);o.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap);"]),o.push([e.i,".container{width:1200px;padding:0 40px;max-width:100%;margin:0 auto}.google-map{margin-bottom:40px;position:relative;height:100%;width:100%}.google-map__centred-btn{position:absolute;top:10px;right:60px;height:40px;z-index:1;background:#fff;font-size:12px;padding:0 10px;line-height:40px;box-shadow:0 1px 4px -1px rgba(0,0,0,.3);text-align:center;cursor:pointer;color:rgba(0,0,0,.75);transition:.3s}.google-map__centred-btn:hover{color:#000}.google-map__container{min-height:600px;height:100%;width:100%}.custom-label-class{padding:2px 4px;background:#fff}",""]),e.exports=o}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[14,15,16],{320:function(t,e,n){var content=n(327);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(43).default)("da3a24c8",content,!0,{sourceMap:!1})},321:function(t,e,n){var content=n(329);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(43).default)("0720e4bc",content,!0,{sourceMap:!1})},322:function(t,e,n){"use strict";n.r(e);n(38);var r={name:"FltrItem",props:{title:{type:String,default:""},name:{type:String,default:""},value:{type:String,default:""},filtersCount:{type:Object,default:function(){return{}}},placeholder:{type:String,default:""},list:{type:Array,default:function(){return[]}}},data:function(){return{opened:!1}},mounted:function(){document.addEventListener("click",this.closeList)},methods:{selectItem:function(t){console.log("item:",t);var e={name:this.name,value:t};this.$emit("change",e),this.close()},clear:function(){var t={name:this.name,value:""};this.$emit("change",t)},toggle:function(){this.opened=!this.opened},open:function(){this.opened=!0},close:function(){this.opened=!1},closeList:function(t){var e=t.target,n=this.$refs.fltr,r=e.closest(".fltr__item");r&&r===n||this.close()}}},l=(n(328),n(8)),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"fltr",staticClass:"fltr__item",class:{"fltr__item--opened":t.opened}},[n("div",{staticClass:"fltr__item-head",on:{click:t.toggle}},[t.title?n("span",{staticClass:"fltr__item-title"},[t._v("\n      "+t._s(t.value||t.title)+"\n    ")]):t._e(),t._v(" "),t.value?n("button",{staticClass:"fltr__item-clear",on:{click:t.clear}},[t._v("\n      clear\n    ")]):t._e()]),t._v(" "),n("div",{staticClass:"fltr__item-list"},t._l(t.list,(function(e){return n("li",{key:e,on:{click:function(n){return t.selectItem(e)}}},[t._v("\n      "+t._s(e)+" - "+t._s(t.filtersCount[e]||0)+"\n    ")])})),0)])}),[],!1,null,null,null);e.default=component.exports},323:function(t,e,n){var content=n(335);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(43).default)("7f8e1d48",content,!0,{sourceMap:!1})},326:function(t,e,n){"use strict";n(320)},327:function(t,e,n){var r=n(42)(!1);r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap);"]),r.push([t.i,".container{width:1200px;padding:0 40px;max-width:100%;margin:0 auto}.search-fltr{display:flex;flex-direction:column;align-items:flex-start}.search-fltr,.search-fltr__field{position:relative;width:100%}.search-fltr__field input{line-height:1.4;width:100%;padding:12px 10px 12px 35px;background:#f6f7fa;border-radius:2px;font-size:14px;border:none}.search-fltr__field img{width:15px;height:15px;position:absolute;top:50%;left:10px;transform:translateY(-50%)}.search-fltr__hints{position:absolute;top:100%;left:0;border:1px solid #000;width:100%;padding:5px 0;background:#fff;z-index:1;opacity:0;transform:translateY(10px);pointer-events:none;transition:0}.search-fltr__hints li{display:flex;align-items:center;white-space:nowrap;padding:5px 10px}.search-fltr__hints li img{width:20px;height:20px;margin-right:5px}.search-fltr__hints li:hover{background:#eee}.search-fltr__clear{cursor:pointer;position:absolute;top:50%;right:10px;transform:translateY(-50%);display:block;font-size:0;width:20px;height:20px;border:1px solid #000}.search-fltr__hints--show{opacity:1;pointer-events:all;transform:translateY(-1px);transition:.3s}",""]),t.exports=r},328:function(t,e,n){"use strict";n(321)},329:function(t,e,n){var r=n(42)(!1);r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap);"]),r.push([t.i,".container{width:1200px;padding:0 40px;max-width:100%;margin:0 auto}.fltr__item{position:relative;width:100%;display:flex;flex-direction:column;align-items:flex-start}.fltr__item select{padding:5px 10px;cursor:pointer;width:100%}.fltr__item-head{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:space-between;border-radius:2px;font-size:14px;padding:12px 10px;cursor:pointer;transition:.2s;background:#f6f7fa}.fltr__item-head:hover{background:#ecedf0}.fltr__item-clear{padding:5px;position:absolute;top:10px;right:10px}.fltr__item-title{margin-right:10px}.fltr__item-list{position:absolute;top:100%;left:0;background:#fff;min-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;border:1px solid #000;padding:5px;list-style-type:none;z-index:10;font-size:14px;opacity:0;transform:translate(0);pointer-events:none;transition:.3s}.fltr__item-list li{white-space:nowrap;padding:5px 10px}.fltr__item-list li:hover{background:#eee}.fltr__item--opened .fltr__item-list{opacity:1;pointer-events:all;transform:translateY(-1px)}",""]),t.exports=r},332:function(t,e,n){"use strict";n.r(e);n(48),n(66),n(37),n(141),n(38),n(62),n(65);var r={name:"SearchFltr",props:{placeholder:{type:String,default:""},name:{type:String,default:""},value:{type:String,default:""},items:{type:Array,default:function(){return[]}}},data:function(){return{icon:"/icons/loupe.svg",localVal:null,hintsShow:!1}},mounted:function(){document.addEventListener("click",this.outerClick)},computed:{getHints:function(){var t=this;return this.value?this.items.filter((function(e){var n=e.name.toLowerCase().trim(),r=t.value.toLowerCase().trim();return n.includes(r)})).map((function(t){return{name:t.name,image:t.image}})).slice(0,10):[]},hintsIsVisible:function(){return this.hintsShow&&this.getHints.length&&this.value!==this.getHints[0].name}},methods:{handleSearch:function(t){this.localVal=t.target.value,this.emitData()},selectHint:function(t){this.localVal=t,this.hintsShow=!1,this.emitData()},clearField:function(){this.localVal=null,this.emitData()},emitData:function(){var t={name:this.name,value:this.localVal};this.$emit("input",t),this.$emit("change",t)},showHints:function(){this.hintsShow=!0},closeHints:function(){this.hintsShow=!1},outerClick:function(t){var e=t.target;this.$refs.searchFltr!==e.closest(".search-fltr")&&this.closeHints()}}},l=(n(326),n(8)),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"searchFltr",staticClass:"search-fltr"},[n("div",{staticClass:"search-fltr__field"},[n("img",{attrs:{src:t.icon,alt:"search icon"}}),t._v(" "),n("input",{attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.handleSearch(e)},focus:t.showHints}}),t._v(" "),t.value?n("span",{staticClass:"search-fltr__clear",on:{click:t.clearField}},[t._v("\n      clear\n    ")]):t._e()]),t._v(" "),n("ul",{staticClass:"search-fltr__hints",class:{"search-fltr__hints--show":t.hintsIsVisible}},t._l(t.getHints,(function(e){return n("li",{key:e.name,on:{click:function(n){return t.selectHint(e.name)}}},[n("img",{attrs:{src:e.image,alt:e.name}}),t._v("\n      "+t._s(e.name)+"\n    ")])})),0)])}),[],!1,null,null,null);e.default=component.exports},334:function(t,e,n){"use strict";n(323)},335:function(t,e,n){var r=n(42)(!1);r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap);"]),r.push([t.i,".container{width:1200px;padding:0 40px;max-width:100%;margin:0 auto}.fltr{position:relative;padding-bottom:10px}.fltr .search-fltr{margin-bottom:8px}.fltr__head{display:flex;align-items:center;justify-content:space-between}.fltr__title{margin-bottom:20px;font-size:18px}.fltr__clear{position:absolute;top:0;right:0;z-index:1;padding:5px 15px}.fltr__footer{font-size:14px;opacity:0;margin-top:2px}.fltr__footer--visible{opacity:1}",""]),t.exports=r},346:function(t,e,n){"use strict";n.r(e);var r=n(31),l=(n(22),n(27),n(62),n(65),n(332)),o=n(322),c={name:"Fltr",props:{storeName:{type:String,default:""},title:{type:String,default:""},items:{type:Array,default:function(){return[]}},filters:{type:Object,default:function(){return{}}},filterList:{type:Object,default:function(){return{}}},searchField:{type:Boolean,default:!0},route:{type:String,default:""}},components:{SearchFltr:l.default,FltrItem:o.default},data:function(){return{hasFilters:!1}},computed:{getFiltersCount:function(){var t=this,e={};return this.items.forEach((function(n){for(var l=function(){var filter=c[o];if("name"===filter)return"continue";t.filterList[filter].forEach((function(t){switch(e[t]=e[t]||0,Object(r.a)(n[filter])){case"string":n[filter]===t&&e[t]++;break;case"object":n[filter].includes(t)&&e[t]++}}))},o=0,c=Object.keys(t.filters);o<c.length;o++)l()})),e}},methods:{filterItemChange:function(t){this.$store.commit("".concat(this.storeName,"/setFilterValue"),t),this.checkFilters()},clearFilters:function(){this.hasFilters=!1,this.$store.commit("".concat(this.storeName,"/clearFilters"))},checkFilters:function(){for(var t=0,e=Object.keys(this.filters);t<e.length;t++){var n=e[t];if(this.filters[n]){this.hasFilters=!0;break}this.hasFilters=!1}}}},f=(n(334),n(8)),component=Object(f.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fltr"},[t.title?n("div",{staticClass:"fltr__head"},[n("div",{staticClass:"fltr__title"},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),t.hasFilters?n("button",{staticClass:"fltr__clear",on:{click:t.clearFilters}},[t._v("\n      Очистить все фильтры\n    ")]):t._e()]):t._e(),t._v(" "),t.searchField?n("search-fltr",{attrs:{name:"name",value:t.filters.name,items:t.items,placeholder:"Водопад, гора, лиман, парк ..."},on:{input:t.filterItemChange}}):t._e(),t._v(" "),n("div",{staticClass:"fltr__list"},t._l(Object.entries(t.filterList),(function(e){var r=e[0],l=e[1];return n("fltr-item",{key:r,attrs:{list:l,currentValue:r,name:r,filtersCount:t.getFiltersCount,value:t.filters[r],title:t.$store.state.lang.filters[r],placeholder:t.$store.state.lang.filters[r]},on:{change:t.filterItemChange}})})),1),t._v(" "),t.route?n("nuxt-link",{staticClass:"btn",attrs:{to:t.route}},[t._v("\n    применить\n  ")]):t._e(),t._v(" "),n("div",{staticClass:"fltr__footer",class:{"fltr__footer--visible":t.hasFilters}},[n("b",[t._v("Найдено:")]),t._v(" "+t._s(t.items.length)+" мест.\n  ")])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{FltrItem:n(322).default})}}]);
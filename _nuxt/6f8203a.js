(window.webpackJsonp=window.webpackJsonp||[]).push([[0,18,19],{325:function(t,e,r){var content=r(337);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(38).default)("7d510d10",content,!0,{sourceMap:!1})},331:function(t,e,r){"use strict";r.r(e);r(27),r(33),r(39),r(60),r(22),r(61);var n=r(25),o=(r(410),r(411),r(47));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={name:"Card",props:{size:{type:String,default:""},index:{type:Number,default:0},item:{type:Object,default:function(){return{}}}},computed:l(l({},Object(o.b)("map",["isMapInit"])),{},{link:function(){return"marker"===this.item.type?"/places/".concat(this.item.link):"route"===this.item.type?"/routes/".concat(this.item.slug):"/"}}),methods:{setSelf:function(t){this.$emit("active",{index:t,item:this.item}),this.isMapInit&&"route"!==this.item.type&&this.$store.commit("map/openInfoWindow",t)},handleEnter:function(){this.isMapInit&&"route"!==this.item.type&&this.$store.commit("map/showHoveredMarker",this.item)},handleLeave:function(){this.isMapInit&&"route"!==this.item.type&&this.$store.commit("map/showHoveredMarker",null)}}},f=(r(414),r(8)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card",class:{"card--sm":"sm"===t.size},style:"background-image: url("+t.item.image+")",on:{mouseenter:t.handleEnter,mouseleave:t.handleLeave,click:function(e){return e.target!==e.currentTarget?null:t.setSelf(t.index)}}},[r("div",{staticClass:"card__content"},[r("div",{staticClass:"card__head"},[t.item.tags?r("div",{staticClass:"card__tags"},t._l(t.item.tags,(function(e){return r("div",{key:e,staticClass:"card__tag tag"},[t._v("\n          #"+t._s(e)+"\n        ")])})),0):t._e(),t._v(" "),r("div",{staticClass:"card__actions"},[r("card-favorite",{attrs:{type:t.item.type,id:t.item._id}}),t._v(" "),"marker"===t.item.type?r("card-route",{attrs:{id:t.item._id}}):t._e()],1)]),t._v(" "),r("div",{staticClass:"card__body"},[t.item.name?r("div",{staticClass:"card__name"},[t._v("\n        "+t._s(t.item.name)+"\n      ")]):t._e(),t._v(" "),t.item.description?r("div",{staticClass:"card__description"},[t._v("\n        "+t._s(t.item.description)+"\n      ")]):t._e()]),t._v(" "),r("div",{staticClass:"card__footer"},[r("nuxt-link",{staticClass:"btn",attrs:{to:t.link}},[t._v("\n        Подробнее\n      ")])],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CardFavorite:r(400).default,CardRoute:r(401).default})},336:function(t,e,r){"use strict";r(325)},337:function(t,e,r){var n=r(37)(!1);n.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap);"]),n.push([t.i,".container{width:1200px;padding:0 40px;max-width:100%;margin:0 auto}.form-control{display:flex;flex-direction:column;align-items:flex-start}.form-control__name{margin-bottom:4px;font-size:12px}.form-control__input{width:100%;padding:5px 10px}",""]),t.exports=n},340:function(t,e,r){"use strict";r.r(e);var n={name:"ModalConfirm",props:{opened:{type:Boolean,default:!1},text:{type:String,default:""}},methods:{close:function(){this.$emit("close")}}},o=(r(361),r(8)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{staticClass:"modal-confirm",attrs:{opened:t.opened},on:{close:t.close}},[r("div",{staticClass:"modal-confirm__text"},[t._v("\n    "+t._s(t.text)+"\n  ")]),t._v(" "),r("div",{staticClass:"modal-confirm__actions"},[r("button",{staticClass:"btn",on:{click:function(e){return t.$emit("yes")}}},[t._v("\n      Да\n    ")]),t._v(" "),r("button",{staticClass:"btn",on:{click:t.close}},[t._v("\n      Нет\n    ")])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Modal:r(207).default})},341:function(t,e,r){var content=r(362);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(38).default)("0348ceb2",content,!0,{sourceMap:!1})},347:function(t,e,r){"use strict";r.r(e);var n={name:"FormControl",inheritAttrs:!1,props:{name:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},value:{type:String,default:""}},methods:{change:function(t){this.$emit("input",t),this.$emit("change",t)}}},o=(r(336),r(8)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"form-control"},[t.name?r("span",{staticClass:"form-control__name"},[t._v("\n    "+t._s(t.name)+"\n  ")]):t._e(),t._v(" "),r("input",{staticClass:"form-control__input",attrs:{type:"text",disabled:t.disabled,placeholder:t.placeholder},domProps:{value:t.value},on:{change:function(e){return t.change(e.target.value)},input:function(e){return t.change(e.target.value)}}})])}),[],!1,null,null,null);e.default=component.exports},360:function(t,e,r){var content=r(381);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(38).default)("7cf4ace0",content,!0,{sourceMap:!1})},361:function(t,e,r){"use strict";r(341)},362:function(t,e,r){var n=r(37)(!1);n.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap);"]),n.push([t.i,".container{width:1200px;padding:0 40px;max-width:100%;margin:0 auto}.modal-confirm__text{text-align:center;color:#000;margin-bottom:20px}.modal-confirm__actions{display:flex;justify-content:center;align-items:center}.modal-confirm__actions .btn:not(:last-child){margin-right:8px}",""]),t.exports=n},363:function(t,e,r){var content=r(383);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(38).default)("65d20904",content,!0,{sourceMap:!1})},380:function(t,e,r){"use strict";r(360)},381:function(t,e,r){var n=r(37)(!1);n.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap);"]),n.push([t.i,".container{width:1200px;padding:0 40px;max-width:100%;margin:0 auto}.favorite{pointer-events:all}.favorite__btn{border:none;font-size:16px;width:30px;height:30px;line-height:30px;display:flex;align-items:center;justify-content:center;text-align:center;border-radius:50%}.favorite--exists button{background:#90ee90}",""]),t.exports=n},382:function(t,e,r){"use strict";r(363)},383:function(t,e,r){var n=r(37)(!1);n.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap);"]),n.push([t.i,".container{width:1200px;padding:0 40px;max-width:100%;margin:0 auto}.card-route{pointer-events:all}.card-route__btn{font-size:10px;padding:2px 4px;border:none}.card-route-modal .form-control,.card-route-modal h3{margin-bottom:20px}.card-route-modal .btn{margin-bottom:10px}.card-route-modal p{font-size:12px}.card-route-list{margin-bottom:20px}.card-route-item{cursor:pointer}.card-route-item:not(:last-child){margin-bottom:10px}.card-route-item:hover,.card-route-selected{text-decoration:underline}.card-route-includes{pointer-events:none;opacity:.4}",""]),t.exports=n},395:function(t,e,r){var content=r(415);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(38).default)("70da11e0",content,!0,{sourceMap:!1})},400:function(t,e,r){"use strict";r.r(e);r(27),r(33),r(39),r(60),r(22),r(61);var n=r(3),o=r(25),c=(r(15),r(62),r(65),r(322),r(206),r(13),r(47)),l=r(44);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={props:{id:{type:String,default:""},type:{type:String,default:""}},name:"CardFavorite",data:function(){return{load:!1,modalOpened:!1}},computed:f(f({},Object(c.c)("auth",["user","profile"])),{},{collection:function(){return"marker"===this.type?"favoritePlaces":"route"===this.type?"favoriteRoutes":void 0},inFavorite:function(){return this.profile&&this.profile[this.collection].includes(this.id)}}),methods:{toFavorite:function(){if(this.user)this.inFavorite?this.showConfirmModal():this.toggleToFavorite();else{this.$store.dispatch("auth/showModal","sign-in")}},toggleToFavorite:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.load=!0,r=JSON.parse(JSON.stringify(t.profile)),-1===(n=r[t.collection].findIndex((function(e){return e===t.id})))?r[t.collection].push(t.id):r[t.collection].splice(n,1),e.next=6,Object(l.d)("users",t.user.uid,r).then((function(){t.$store.dispatch("auth/setUserData",r)})).catch((function(t){console.log("err:",t)})).finally((function(){t.load=!1,t.closeConfirmModal()}));case 6:case"end":return e.stop()}}),e)})))()},showConfirmModal:function(){this.modalOpened=!0},closeConfirmModal:function(){this.modalOpened=!1}}},h=(r(380),r(8)),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"favorite",class:{"favorite--exists":t.inFavorite}},[r("button",{staticClass:"favorite__btn",class:{"btn--load":t.load},on:{click:function(e){return e.stopPropagation(),t.toFavorite(e)}}},[t.inFavorite?[t._v("\n      ★\n    ")]:[t._v("\n      ☆\n    ")]],2),t._v(" "),r("modal-confirm",{attrs:{opened:t.modalOpened,text:"Удалить место из избранного?"},on:{close:t.closeConfirmModal,yes:t.toggleToFavorite}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ModalConfirm:r(340).default})},401:function(t,e,r){"use strict";r.r(e);r(27),r(33),r(39),r(60),r(22),r(61);var n=r(3),o=r(25),c=(r(15),r(322),r(40),r(205),r(13),r(47)),l=r(44);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var f={name:"CardRoute",props:{id:{type:String,default:""}},data:function(){return{load:!1,modalOpened:!1,routeName:"",selectedRoute:null}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.c)("auth",["user","profile"])),methods:{toRoute:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=JSON.parse(JSON.stringify(t.profile))).createdRoutes.length){e.next=9;break}if(t.routeName.length){e.next=5;break}return alert("Введите новое имя"),e.abrupt("return");case 5:return t.editedRoute(t.routeName),e.next=8,t.createNewRoute(r);case 8:return e.abrupt("return");case 9:if(!t.routeName){e.next=18;break}if(-1===r.createdRoutes.findIndex((function(e){return e.name===t.routeName}))){e.next=14;break}return alert("Маршрут с таким именем уже существует, введите новое имя"),e.abrupt("return");case 14:return t.editedRoute(t.routeName),e.next=17,t.createNewRoute(r);case 17:return e.abrupt("return");case 18:if(null==t.selectedRoute){e.next=29;break}if(n=r.createdRoutes.find((function(e){return e.name===t.selectedRoute})),-1===n.list.findIndex((function(e){return e===t.id}))){e.next=24;break}return alert("Место уже добавлено в маршрут, выберите другой или создайте новый"),e.abrupt("return");case 24:return n.list.push(t.id),t.$store.commit("setEditedUserRoute",n),e.next=28,t.updateProfileData(r);case 28:return e.abrupt("return");case 29:case"end":return e.stop()}}),e)})))()},createNewRoute:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n={name:e.routeName,list:[e.id]},e.$store.commit("setEditedUserRoute",n),t.createdRoutes.push(n),r.next=5,e.updateProfileData(t);case 5:case"end":return r.stop()}}),r)})))()},updateProfileData:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.load=!0,r.next=3,Object(l.d)("users",e.user.uid,t).then((function(){e.$store.dispatch("auth/setUserData",t)})).catch((function(t){console.log("err:",t)})).finally((function(){e.load=!1,e.closeModal()}));case 3:case"end":return r.stop()}}),r)})))()},editedRoute:function(t){this.$store.commit("setEditedUserRoute",t)},selectRoute:function(t){this.selectedRoute===t?this.selectedRoute=null:this.selectedRoute=t},showModal:function(){if(this.user)this.modalOpened=!0;else{this.$store.dispatch("auth/showModal","sign-in")}},closeModal:function(){this.modalOpened=!1,this.clearData()},clearData:function(){this.routeName="",this.selectedRoute=null}}},m=(r(382),r(8)),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-route"},[r("button",{staticClass:"card-route__btn",class:{"btn--load":t.load},on:{click:t.showModal}},[t._v("\n    в маршрут\n  ")]),t._v(" "),t.user&&t.profile?r("modal",{attrs:{opened:t.modalOpened},on:{close:t.closeModal}},[r("div",{staticClass:"card-route-modal"},[r("h3",[t._v("\n        Новый маршрут / Выбрать из списка\n      ")]),t._v(" "),r("form-control",{attrs:{name:"Новый маршрут",placeholder:"Введите название нового маршрута"},model:{value:t.routeName,callback:function(e){t.routeName=e},expression:"routeName"}}),t._v(" "),r("div",{staticClass:"card-route-list"},t._l(t.profile.createdRoutes,(function(e){return r("div",{key:e.name,staticClass:"card-route-item",class:{"card-route-selected":t.selectedRoute===e.name,"card-route-includes":e.list.includes(t.id)},on:{click:function(r){return t.selectRoute(e.name)}}},[t._v("\n          "+t._s(e.name)+" "+t._s(t.selectedRoute===e.name?"✓":"")+"\n          "+t._s(e.list.includes(t.id)?"- добавлен ✓":"")+"\n        ")])})),0),t._v(" "),r("button",{staticClass:"btn",on:{click:t.toRoute}},[t._v("\n        Подтвердить\n      ")]),t._v(" "),r("p",[t._v("\n        Посмотреть и отредактировать маршруты можно в\n        "),r("nuxt-link",{staticClass:"action",attrs:{to:"/profile"}},[t._v("\n          личном кабинете\n        ")])],1)],1)]):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{FormControl:r(347).default,Modal:r(207).default})},410:function(t,e,r){"use strict";var n=r(18),o=r(10),c=r(86),l=r(28),d=r(23),f=r(67),m=r(142),h=r(84),_=r(12),v=r(74),x=r(85).f,y=r(55).f,O=r(26).f,w=r(208).trim,j="Number",C=o.Number,k=C.prototype,M=f(v(k))==j,R=function(t){var e,r,n,o,c,l,d,code,f=h(t,!1);if("string"==typeof f&&f.length>2)if(43===(e=(f=w(f)).charCodeAt(0))||45===e){if(88===(r=f.charCodeAt(2))||120===r)return NaN}else if(48===e){switch(f.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+f}for(l=(c=f.slice(2)).length,d=0;d<l;d++)if((code=c.charCodeAt(d))<48||code>o)return NaN;return parseInt(c,n)}return+f};if(c(j,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var N,P=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof P&&(M?_((function(){k.valueOf.call(r)})):f(r)!=j)?m(new C(R(e)),r,P):R(e)},S=n?x(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),E=0;S.length>E;E++)d(C,N=S[E])&&!d(P,N)&&O(P,N,y(C,N));P.prototype=k,k.constructor=P,l(o,j,P)}},411:function(t,e,r){"use strict";var n=r(6),o=r(412);n({target:"String",proto:!0,forced:r(413)("link")},{link:function(t){return o(this,"a","href",t)}})},412:function(t,e,r){var n=r(34),o=/"/g;t.exports=function(t,e,r,c){var l=String(n(t)),d="<"+e;return""!==r&&(d+=" "+r+'="'+String(c).replace(o,"&quot;")+'"'),d+">"+l+"</"+e+">"}},413:function(t,e,r){var n=r(12);t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},414:function(t,e,r){"use strict";r(395)},415:function(t,e,r){var n=r(37)(!1);n.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap);"]),n.push([t.i,".container{width:1200px;padding:0 40px;max-width:100%;margin:0 auto}.card{border-radius:8px;overflow:hidden;background:no-repeat 50%/cover;cursor:pointer}.card__content{padding:20px;display:flex;flex-direction:column;min-height:250px;background:rgba(0,0,0,.2);transition:.3s;pointer-events:none}.card__description,.card__name{color:#fff}.card__head{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:40px}.card__tags{display:flex;flex-wrap:wrap}.card__tags .tag{margin-bottom:5px}.card__tags .tag:not(:last-child){margin-right:5px}.card__actions{display:flex;flex-direction:column;align-items:flex-end}.card__actions>*{margin-bottom:4px}.card__name{font-size:20px;font-size:18px;margin-bottom:20px}.card__description{font-size:16px;margin-bottom:20px}.card__body{margin-top:auto}.card__footer{display:flex}.card__footer .btn{pointer-events:all}.card__footer .btn:not(:last-child){margin-right:10px}.card--active .card__content,.card:hover .card__content{background:rgba(0,0,0,.4)}.card--sm .card__content{min-height:100px}.card--sm .card__name{margin-bottom:0}.card--sm .card__description,.card--sm .card__footer,.card--sm .card__head{display:none}",""]),t.exports=n}}]);